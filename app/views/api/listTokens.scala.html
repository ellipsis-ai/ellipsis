@(
  teamAccess: models.accounts.user.UserTeamAccess,
  tokens: Seq[json.APITokenData],
  maybeJustCreatedTokenId: Option[String]
)(implicit messages: Messages, r: RequestHeader)

@import play.filters.csrf._
@import play.api.libs.json._
@import json.Formatting._

@main("API token generator", Some(teamAccess), selectedNav = "settings") {
  @views.html.settingsRoutes()
  <div id="content" class="content">
    <div id="apiTokenGenerator"></div>
    <script>
      var ApiTokenGeneratorConfig = {
        containerId: 'apiTokenGenerator',
        csrfToken: "@CSRF.getToken(r).map(_.value)",
        teamId: "@teamAccess.maybeTargetTeam.map(_.id)",
        tokens: @Html(Json.toJson(tokens).toString()),
        justCreatedTokenId: "@maybeJustCreatedTokenId.map(justCreatedTokenId => justCreatedTokenId).getOrElse("")"
      };
    </script>
    <script data-main='@RemoteAssets.getUrl("javascripts/api_token_generator/loader.js")' src='@RemoteAssets.getUrl("lib/requirejs/require.min.js")'></script>
  </div>
}
