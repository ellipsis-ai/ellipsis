@(
  title: String,
  maybeTeamAccess: Option[models.accounts.UserTeamAccess],
  pageId: String = ""
  )(content: Html)(implicit messages: Messages, r: RequestHeader)

@import helper._
@navBorderColorForPage = @{
  if (pageId == "intro") {
    "border-blue-medium"
  } else {
    "border-pink"
  }
}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>@title</title>
    <link rel="stylesheet" href="/assets/lib/codemirror/lib/codemirror.css">
    <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700|Source+Sans+Pro:400,300,600,400italic,300italic,600italic' rel='stylesheet' type='text/css'>
    <link rel='stylesheet' href='@routes.Assets.versioned("stylesheets/main.css")'>
    <!-- For IE 9 and below. ICO should be 32x32 pixels in size -->
    <!--[if IE]><link rel="shortcut icon" href="/assets/images/favicon.ico"><![endif]-->

    <!-- IE 10+ "Metro" Tiles - 144x144 pixels in size icon should be transparent -->
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="/assets/images/favicon-144x144.png">

    <!-- Touch Icons - iOS and Android 2.1+ 152x152 pixels in size. -->
    <link rel="apple-touch-icon-precomposed" href="/assets/images/favicon-apple-152x152.png">

    <!-- Firefox, Chrome, Safari, IE 11+ and Opera. 96x96 pixels in size. -->
    <link rel="icon" href="/assets/images/favicon-256x256.png" sizes="256x256">
    <link rel="icon" href="/assets/images/favicon-96x96.png" sizes="96x96">
    <link rel="icon" href="/assets/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" href="/assets/images/favicon-16x16.png" sizes="16x16">
  </head>
  <body class="bg-lightest">
    <header class='@("bg-blue-dark border-emphasis-bottom type-white " + navBorderColorForPage)'>
      <div class="container">
        <div class="columns columns-elastic">
          <div class="column column-expand pts pbxs">
            <a href='@routes.ApplicationController.index(maybeTeamAccess.flatMap(_.maybeAdminAccessToTeamId))' class="link-green display-inline-block align-b" style="height: 36px">
              <span class="mobile-display-none">
                <svg role="img" aria-label="Ellipsis"
                version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                viewBox="0 0 400 112" enable-background="new 0 0 400 112" xml:space="preserve" height="28px">
                  <title>Ellipsis</title>
                  <g>
                    <g>
                      <path fill="#FFFFFF" d="M167.9,82h28.6c1.5,0,2.1,0.8,2.1,2.1v2c0,1.3-0.6,2.1-2.1,2.1H163c-1.3,0-2.1-1-2.1-2.1V25.9
                        c0-1.2,0.8-2.1,2.1-2.1h33.5c1.5,0,2.1,0.8,2.1,2.1v2c0,1.3-0.6,2.1-2.1,2.1h-28.6v22.3h23.6c1.5,0,2.1,0.8,2.1,2.1v2
                        c0,1.3-0.6,2.1-2.1,2.1h-23.6V82z"></path>
                      <path fill="#FFFFFF" d="M213.4,80.5c0,1.8,0.7,2.4,2.4,2.4c0.5,0,1-0.1,1-0.1c0.7-0.2,1,0.2,1,0.9v2.7c0,1.5-0.5,1.9-2,2.1
                        c0,0-1.1,0.2-2.2,0.2c-4,0-6.4-2-6.4-6.6V25c0-1.3,0.6-2.1,2.1-2.1h2c1.5,0,2.1,0.8,2.1,2.1V80.5z"></path>
                      <path fill="#FFFFFF" d="M231.9,80.5c0,1.8,0.7,2.4,2.4,2.4c0.5,0,1-0.1,1-0.1c0.7-0.2,1,0.2,1,0.9v2.7c0,1.5-0.5,1.9-2,2.1
                        c0,0-1.1,0.2-2.2,0.2c-4,0-6.4-2-6.4-6.6V25c0-1.3,0.6-2.1,2.1-2.1h2c1.5,0,2.1,0.8,2.1,2.1V80.5z"></path>
                      <path fill="#FFFFFF" d="M247.2,27c2.8,0,5,2.2,5,5c0,2.7-2.2,4.8-5,4.8s-5-2.1-5-4.8C242.3,29.2,244.5,27,247.2,27z M250.4,80
                        c0,2.1,0.8,2.8,2.5,2.8c0.5,0,1-0.1,1-0.1c0.8-0.2,1,0.2,1,0.9v2.7c0,1.5-0.4,2-2,2.1c0,0-0.8,0.2-2.2,0.2c-4,0-6.5-2-6.5-6.6
                        V46.2c0-1.3,0.7-2.1,2.1-2.1h2c1.5,0,2.1,0.8,2.1,2.1V80z"></path>
                      <path fill="#FFFFFF" d="M264.3,52.2c0-2.1-0.8-2.8-2.5-2.8c-0.5,0-1,0.1-1,0.1c-0.7,0.2-1-0.6-1-1.8V46c0-1.3,0.4-2,1.5-2.2
                        c0,0,1.2-0.3,2.8-0.3c4.5,0,6.4,2.6,6.4,6v0.2h0.1c1-2.5,4.9-6.1,11.6-6.1c11.8,0,17.1,7.9,17.1,22.6c0,14.9-5.1,22.5-17.2,22.5
                        c-6.6,0-10.1-3-11.2-5.6h-0.4v20.6c0,1.3-0.6,2.1-2.1,2.1h-2c-1.4,0-2.1-0.8-2.1-2.1V52.2z M281.9,82.9c8.1,0,11.1-5.9,11.1-16.7
                        c0-10.7-3-16.7-11.1-16.7c-8.9,0-11.9,6.4-11.9,16.7C270,76.4,273.5,82.9,281.9,82.9z"></path>
                      <path fill="#FFFFFF" d="M307,55.4c0-5.6,4.5-11.8,15.3-11.8c10.1,0,15.1,4.4,16,10.7c0.2,1.1-0.2,2.4-2,2.7l-1.7,0.3
                        c-1.8,0.3-2.2-1.2-2.4-1.9c-0.7-3.6-3.9-6.1-9.8-6.1c-6.6,0-9.3,2.9-9.3,6.2c0,9.3,25.5,5.3,25.5,21.5c0,6.3-4.1,11.7-16.4,11.8
                        c-10.5,0.2-15.1-5-16-10.3c-0.2-1.2,0.1-2.1,2-2.4l1.6-0.3c1.8-0.3,2,0.6,2.4,1.8c1,3,3.8,5.5,10.2,5.5c8.1,0,10-3.5,10-6.7
                        C332.5,66,307,71,307,55.4z"></path>
                      <path fill="#FFFFFF" d="M350.7,27c2.8,0,5,2.2,5,5c0,2.7-2.2,4.8-5,4.8c-2.8,0-5-2.1-5-4.8C345.8,29.2,348,27,350.7,27z M353.9,80
                        c0,2.1,0.8,2.8,2.5,2.8c0.5,0,1-0.1,1-0.1c0.8-0.2,1,0.2,1,0.9v2.7c0,1.5-0.4,2-2,2.1c0,0-0.8,0.2-2.2,0.2c-4,0-6.5-2-6.5-6.6
                        V46.2c0-1.3,0.7-2.1,2.1-2.1h2c1.5,0,2.1,0.8,2.1,2.1V80z"></path>
                      <path fill="#FFFFFF" d="M364.9,55.4c0-5.6,4.5-11.8,15.3-11.8c10.1,0,15.1,4.4,16,10.7c0.2,1.1-0.2,2.4-2,2.7l-1.7,0.3
                        c-1.8,0.3-2.2-1.2-2.4-1.9c-0.7-3.6-3.9-6.1-9.8-6.1c-6.6,0-9.3,2.9-9.3,6.2c0,9.3,25.5,5.3,25.5,21.5c0,6.3-4.1,11.7-16.4,11.8
                        c-10.5,0.2-15.1-5-16-10.3c-0.2-1.2,0.1-2.1,2-2.4l1.6-0.3c1.8-0.3,2,0.6,2.4,1.8c1,3,3.8,5.5,10.2,5.5c8.1,0,10-3.5,10-6.7
                        C390.3,66,364.9,71,364.9,55.4z"></path>
                    </g>
                    <g>
                      <g>
                        <path fill="currentColor" d="M80.5,8C93.8,8,104,18.4,104,31.7v24v24c0,13.3-10.2,24.3-23.5,24.3H8V31.7C8,18.4,19.2,8,32.5,8H80.5
                           M80.5,0h-48C14.6,0,0,14.2,0,31.7V104v8h8h72.5c17.4,0,31.5-14.5,31.5-32.3v-24v-24C112,13.9,98.2,0,80.5,0L80.5,0z"></path>
                      </g>
                    </g>
                    <path fill-rule="evenodd" clip-rule="evenodd" fill="currentColor" d="M80.5,84h-48c-2.2,0-4-1.8-4-4c0-2.2,1.8-4,4-4h48
                      c2.2,0,4,1.8,4,4C84.5,82.2,82.7,84,80.5,84z"></path>
                    <path fill-rule="evenodd" clip-rule="evenodd" fill="currentColor" d="M28.5,56c0-2.2,1.8-4,4-4h28c2.2,0,4,1.8,4,4c0,2.2-1.8,4-4,4h-28
                      C30.3,60,28.5,58.2,28.5,56z"></path>
                    <path fill-rule="evenodd" clip-rule="evenodd" fill="currentColor" d="M80.5,36h-48c-2.2,0-4-1.8-4-4c0-2.2,1.8-4,4-4h48
                      c2.2,0,4,1.8,4,4C84.5,34.2,82.7,36,80.5,36z"></path>
                  </g>
                </svg>
              </span>
              <span class="mobile-display-only">
                <svg role="img" aria-label="Ellipsis"
                version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                viewBox="0 0 112 112" enable-background="new 0 0 112 112" xml:space="preserve" height="28px">
                  <title>Ellipsis</title>
                  <g>
                    <g>
                      <path fill="currentColor" d="M80.5,8C93.8,8,104,18.4,104,31.7v24v24c0,13.3-10.2,24.3-23.5,24.3H8V31.7C8,18.4,19.2,8,32.5,8H80.5
                         M80.5,0h-48C14.6,0,0,14.2,0,31.7V104v8h8h72.5c17.4,0,31.5-14.5,31.5-32.3v-24v-24C112,13.9,98.2,0,80.5,0L80.5,0z"></path>
                    </g>
                    <path fill-rule="evenodd" clip-rule="evenodd" fill="currentColor" d="M80.5,84h-48c-2.2,0-4-1.8-4-4c0-2.2,1.8-4,4-4h48
                      c2.2,0,4,1.8,4,4C84.5,82.2,82.7,84,80.5,84z"></path>
                    <path fill-rule="evenodd" clip-rule="evenodd" fill="currentColor" d="M28.5,56c0-2.2,1.8-4,4-4h28c2.2,0,4,1.8,4,4c0,2.2-1.8,4-4,4h-28
                      C30.3,60,28.5,58.2,28.5,56z"></path>
                    <path fill-rule="evenodd" clip-rule="evenodd" fill="currentColor" d="M80.5,36h-48c-2.2,0-4-1.8-4-4c0-2.2,1.8-4,4-4h48
                      c2.2,0,4,1.8,4,4C84.5,34.2,82.7,36,80.5,36z"></path>
                  </g>
                </svg>
              </span>
            </a>

            <a class="link-blue-light display-inline-block align-button mhm"
              href='@routes.ApplicationController.index(maybeTeamAccess.flatMap(_.maybeAdminAccessToTeamId))'>Behaviors</a>
          </div>
          @maybeTeamAccess.map { teamAccess =>
            <div class="column column-shrink align-r pts pbxs">
              <form action='@routes.SocialAuthController.signOut()' method="POST" id="main-user-menu-container">
                @CSRF.formField
                <span class="link-blue-light">
                  <button class="button-subtle button-dropdown-trigger button-dropdown-trigger-no-icon mobile-phs" type="button" id="main-user-menu-button">
                    <span class="display-inline-block align-t">
                      <svg width="26px" height="24px" viewBox="0 0 26 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <title>User</title>
                        <defs>
                          <rect id="path-1" x="11" y="5" width="14" height="2" rx="1"></rect>
                          <mask id="mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="14" height="2" fill="white">
                            <use xlink:href="#path-1"></use>
                          </mask>
                          <rect id="path-3" x="11" y="11" width="14" height="2" rx="1"></rect>
                          <mask id="mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="14" height="2" fill="white">
                            <use xlink:href="#path-3"></use>
                          </mask>
                          <rect id="path-5" x="11" y="17" width="14" height="2" rx="1"></rect>
                          <mask id="mask-6" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="14" height="2" fill="white">
                            <use xlink:href="#path-5"></use>
                          </mask>
                        </defs>
                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                          <g id="team">
                            <g id="Group" transform="translate(0.400000, 6.000000)" fill="currentColor">
                              <g id="Group-2" transform="translate(0.600000, 0.000000)">
                                <path d="M5.65417809,0 L3.50045439,0 L1.34673068,0 C0.603142631,0 0,0.616081184 0,1.37642572 L0,6.34851682 C0,7.10839674 0.602915373,7.72494254 1.34627617,7.72494254 L1.67307312,7.72494254 L1.67307312,14.9745826 C1.67307312,15.5602314 2.13781565,16.0357662 2.71118749,16.0357662 L4.28903952,16.0357662 C4.86241135,16.0357662 5.32692663,15.5602314 5.32692663,14.9745826 L5.32692663,7.72494254 L5.65417809,7.72494254 C6.39731163,7.72494254 6.99999974,7.10839674 6.99999974,6.34851682 L6.99999974,1.37642572 C7.00045426,0.616081184 6.39753889,0 5.65417809,0 L5.65417809,0 Z" id="Shape"></path>
                              </g>
                            </g>
                            <use id="Rectangle" stroke="currentColor" mask="url(#mask-2)" stroke-width="2" stroke-linecap="square" fill="#FFFFFF" xlink:href="#path-1"></use>
                            <use id="Rectangle-Copy" stroke="currentColor" mask="url(#mask-4)" stroke-width="2" stroke-linecap="square" fill="#FFFFFF" xlink:href="#path-3"></use>
                            <use id="Rectangle-Copy-2" stroke="currentColor" mask="url(#mask-6)" stroke-width="2" stroke-linecap="square" fill="#FFFFFF" xlink:href="#path-5"></use>
                            <ellipse id="Oval" fill="currentColor" cx="4.5" cy="3.04444444" rx="2" ry="2.04444444"></ellipse>
                          </g>
                        </g>
                      </svg>
                    </span>
                    @teamAccess.maybeAdminAccessToTeam.map { team =>
                      <span class="type-label type-pink display-inline-block align-t ptxs mlxs mobile-display-none">Admin access to @team.name!!</span>
                    }.getOrElse {
                      @teamAccess.maybeTargetTeam.flatMap(_.maybeNonEmptyName.map(name => {
                          <span class="type-label display-inline-block align-t ptxs mlxs mobile-display-none">{name}</span>
                      })).getOrElse("")
                    }
                  </button>
                </span>
                <div class="position-relative type-black">
                  <ul class="type-s popup popup-dropdown-menu popup-dropdown-menu-right fade-in" id="main-user-menu" style="display: none">
                    @teamAccess.loggedInTeam.maybeNonEmptyName.map(name => {
                      <li class='type-disabled align-l phl pvs display-ellipsis'>Signed into {name}</li>
                    }).getOrElse("")
                    <li><button type="submit" class="button-dropdown-item">Sign out</button></li>
                  </ul>
                </div>
              </form>
              <script>
                (function() {
                  var userMenuButton = document.getElementById('main-user-menu-button');
                  var userMenu = document.getElementById('main-user-menu');
                  var addClass = function(el, className) {
                    var classes = el.className.replace(/\s+/g, ' ').split(' ');
                    if (!classes.find(function(cl) { return cl.trim() === className; })) {
                      classes.push(className);
                      el.className = classes.join(' ');
                    }
                  };
                  var removeClass = function(el, className) {
                    var classes = el.className.replace(/\s+/g, ' ').split(' ');
                    var newClasses = classes.filter(function(cl) { return cl !== className; });
                    el.className = newClasses.join(' ');
                  };
                  userMenuButton.addEventListener('click', function(event) {
                    var oldStyle = userMenu.style.display;
                    userMenu.style.display = oldStyle === 'none' ? '' : 'none';
                    if (oldStyle === 'none') {
                      addClass(userMenuButton, 'button-dropdown-trigger-menu-open');
                    } else {
                      removeClass(userMenuButton, 'button-dropdown-trigger-menu-open');
                    }
                    event.stopPropagation();
                    event.preventDefault();
                  });
                  document.addEventListener('click', function() {
                    if (userMenu.style.display !== 'none') {
                      userMenu.style.display = 'none';
                      removeClass(userMenuButton, 'button-dropdown-trigger-menu-open');
                    }
                  });
                })();
              </script>
            </div>
          }
        </div>
      </div>
    </header>
    @content
  </body>
  <script>window.document.body.addEventListener('touchstart', function() {})</script>
</html>
