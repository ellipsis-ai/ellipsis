@(
  maybeUser: Option[models.accounts.User],
  team: Team,
  behaviorCategories: Seq[json.BehaviorCategory],
  alreadyImportedIds: Seq[String]
  )(implicit messages: Messages, r: RequestHeader)

@import helper._
@import play.api.libs.json._
@import json.Formatting._

@main("Published behaviors", maybeUser) {

  <div id="content" class="content">
    <div class="container ptxxxxl">
      <h1>Published behaviors:</h1>

      @behaviorCategories.map { category =>
        <h3>@category.name â€“ @category.description</h3>
        @category.behaviorVersions.map { ea =>
          <form action="@routes.ApplicationController.doImportBehavior()" method="POST" class="mbl">
            @ea.triggers.map { t =>
              <span class="box-code-example">@t.text</span>
            }
            @CSRF.formField
            <input type="hidden" name="teamId" value="@team.id"/>
            <input type="hidden" name="dataJson" value="@Json.toJson(ea).toString">
            <input type="submit" value="Import"/>
            @if(ea.config.exists { c => alreadyImportedIds.contains(c.publishedId) }) {
              <span>(already imported)</span>
            }
          </form>
        }
      }

    </div>
  </div>
}
